<mvc:View controllerName="ns.gwsampleclient.controller.SalesOrderDetail"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:html="http://www.w3.org/1999/xhtml">
    <Page id="detailPage" title="Sales Order Details" showNavButton="true" navButtonPress="onNavBack">
        <content>
            <ObjectHeader id="objectHeader"
                         title="{SalesOrderID}"
                         number="{GrossAmount}"
                         numberUnit="{CurrencyCode}"
                         backgroundDesign="Solid">
                <attributes>
                    <ObjectAttribute title="Customer" text="{CustomerID} - {CustomerName}"/>
                    <ObjectAttribute title="Status" text="{LifecycleStatusDescription}"/>
                    <ObjectAttribute title="Net Amount" text="{NetAmount} {CurrencyCode}"/>
                    <ObjectAttribute title="Tax Amount" text="{TaxAmount} {CurrencyCode}"/>
                </attributes>
                <statuses>
                    <ObjectStatus title="Billing Status" text="{BillingStatusDescription}"/>
                    <ObjectStatus title="Delivery Status" text="{DeliveryStatusDescription}"/>
                </statuses>
            </ObjectHeader>

            <IconTabBar id="iconTabBar" class="sapUiResponsiveContentPadding">
                <items>
                    <IconTabFilter text="Header Information" key="header" icon="sap-icon://detail-view">
                        <content>
                            <VBox class="sapUiMediumMargin">
                                <Panel headerText="Sales Order Header" class="sapUiResponsiveMargin">
                                    <content>
                                        <form:SimpleForm id="headerForm"
                                                       editable="false"
                                                       layout="ResponsiveGridLayout"
                                                       labelSpanXL="4" labelSpanL="4" labelSpanM="4" labelSpanS="12"
                                                       adjustLabelSpan="false"
                                                       emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0"
                                                       columnsXL="2" columnsL="2" columnsM="1"
                                                       singleContainerFullSize="false"
                                                       xmlns:form="sap.ui.layout.form">
                                            <form:content>
                                                <Label text="Sale Order No"/>
                                                <Text text="{SalesOrderID}"/>
                                                
                                                <Label text="Customer"/>
                                                <Text text="{CustomerID} - {CustomerName}"/>
                                                
                                                <Label text="Gross Amount"/>
                                                <Text text="{GrossAmount} {CurrencyCode}"/>
                                                
                                                <Label text="Net Amount"/>
                                                <Text text="{NetAmount} {CurrencyCode}"/>
                                                
                                                <Label text="Tax Amount"/>
                                                <Text text="{TaxAmount} {CurrencyCode}"/>
                                                
                                                <Label text="Billing Status"/>
                                                <Text text="{BillingStatusDescription}"/>
                                                
                                                <Label text="Delivery Status"/>
                                                <Text text="{DeliveryStatusDescription}"/>
                                                
                                                <Label text="Currency"/>
                                                <Text text="{CurrencyCode}"/>
                                                
                                                <Label text="Created At"/>
                                                <Text text="{path: 'CreatedAt', type: 'sap.ui.model.odata.type.DateTime'}"/>
                                                
                                                <Label text="Changed At"/>
                                                <Text text="{path: 'ChangedAt', type: 'sap.ui.model.odata.type.DateTime'}"/>
                                                
                                                <Label text="Note"/>
                                                <Text text="{Note}"/>
                                            </form:content>
                                        </form:SimpleForm>
                                    </content>
                                </Panel>
                            </VBox>
                        </content>
                    </IconTabFilter>

                    <IconTabFilter text="Business Partner Details" key="businessPartner" icon="sap-icon://business-partner">
                        <content>
                            <VBox class="sapUiMediumMargin">
                                <Panel headerText="Business Partner Information" class="sapUiResponsiveMargin">
                                    <content>
                                        <form:SimpleForm id="businessPartnerForm"
                                                       editable="false"
                                                       layout="ResponsiveGridLayout"
                                                       labelSpanXL="4" labelSpanL="4" labelSpanM="4" labelSpanS="12"
                                                       adjustLabelSpan="false"
                                                       emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0"
                                                       columnsXL="2" columnsL="2" columnsM="1"
                                                       singleContainerFullSize="false"
                                                       xmlns:form="sap.ui.layout.form">
                                            <form:content>
                                                <Label text="Business Partner ID"/>
                                                <Text text="{ToBusinessPartner/BusinessPartnerID}"/>
                                                
                                                <Label text="Company Name"/>
                                                <Text text="{ToBusinessPartner/CompanyName}"/>
                                                
                                                <Label text="Email Address"/>
                                                <Text text="{ToBusinessPartner/EmailAddress}"/>
                                                
                                                <Label text="Phone Number"/>
                                                <Text text="{ToBusinessPartner/PhoneNumber}"/>
                                                
                                                <Label text="Fax Number"/>
                                                <Text text="{ToBusinessPartner/FaxNumber}"/>
                                                
                                                <Label text="Web Address"/>
                                                <Text text="{ToBusinessPartner/WebAddress}"/>
                                                
                                                <Label text="Legal Form"/>
                                                <Text text="{ToBusinessPartner/LegalForm}"/>
                                                
                                                <Label text="Business Partner Role"/>
                                                <Text text="{ToBusinessPartner/BusinessPartnerRole}"/>
                                                
                                                <Label text="Street"/>
                                                <Text text="{ToBusinessPartner/Address/Street}"/>
                                                
                                                <Label text="Building"/>
                                                <Text text="{ToBusinessPartner/Address/Building}"/>
                                                
                                                <Label text="City"/>
                                                <Text text="{ToBusinessPartner/Address/City}"/>
                                                
                                                <Label text="Postal Code"/>
                                                <Text text="{ToBusinessPartner/Address/PostalCode}"/>
                                                
                                                <Label text="Country"/>
                                                <Text text="{ToBusinessPartner/Address/Country}"/>
                                                
                                                <Label text="Address Type"/>
                                                <Text text="{ToBusinessPartner/Address/AddressType}"/>
                                            </form:content>
                                        </form:SimpleForm>
                                    </content>
                                </Panel>
                                
                                <!-- Map Panel -->
                                <Panel headerText="Business Partner Location" class="sapUiResponsiveMargin">
                                    <content>
                                        <VBox class="sapUiMediumMargin">
                                            <HBox alignItems="Center" class="sapUiSmallMarginBottom">
                                                <Button id="showLocationButton"
                                                       text="Show Location on Map"
                                                       type="Emphasized"
                                                       press="onShowBusinessPartnerLocation"
                                                       icon="sap-icon://map"/>
                                            </HBox>
                                            
                                            <!-- Map Container -->
                                            <VBox id="mapContainer" visible="false" class="sapUiMediumMarginTop">
                                                <html:div id="googleMap" style="height: 400px; width: 100%; border: 1px solid #ccc;"></html:div>
                                                <HBox justifyContent="SpaceBetween" alignItems="Center" class="sapUiSmallMarginTop">
                                                    <Text id="mapStatus" text="Map loaded successfully" class="sapUiTinyText"/>
                                                    <Button text="Hide Map" 
                                                           press="onHideMap" 
                                                           icon="sap-icon://decline"
                                                           type="Transparent"/>
                                                </HBox>
                                            </VBox>
                                        </VBox>
                                    </content>
                                </Panel>
                            </VBox>
                        </content>
                    </IconTabFilter>
                    
                    <IconTabFilter text="Line Items" key="lineItems" icon="sap-icon://list">
                        <content>
                            <VBox class="sapUiMediumMargin">
                                <Table id="lineItemsTable"
                                       items="{path: 'ToLineItems', parameters: {expand: 'ToProduct'}}"
                                       class="sapUiResponsiveMargin"
                                       mode="SingleSelect">
                                    <headerToolbar>
                                        <Toolbar>
                                            <Title text="Sales Order Line Items" level="H3"/>
                                            <ToolbarSpacer/>
                                            <Text text="{= ${ToLineItems}.length} Items" class="sapUiTinyMarginEnd"/>
                                        </Toolbar>
                                    </headerToolbar>
                                    
                                    <columns>
                                        <Column width="8%">
                                            <Text text="Position"/>
                                        </Column>
                                        <Column width="20%">
                                            <Text text="Product Information"/>
                                        </Column>
                                        <Column width="12%">
                                            <Text text="Delivery Date"/>
                                        </Column>
                                        <Column width="10%">
                                            <Text text="Quantity"/>
                                        </Column>
                                        <Column width="10%">
                                            <Text text="Gross Amount"/>
                                        </Column>
                                        <Column width="10%">
                                            <Text text="Net Amount"/>
                                        </Column>
                                        <Column width="10%">
                                            <Text text="Tax Amount"/>
                                        </Column>
                                        <Column width="10%">
                                            <Text text="Actions"/>
                                        </Column>
                                    </columns>
                                    
                                    <items>
                                        <ColumnListItem>
                                            <cells>
                                                <Text text="{ItemPosition}"/>
                                                <VBox>
                                                    <Link text="{ProductID} - {ToProduct/Name}"
                                                          press="onProductLineItemPress"
                                                          emphasized="true"/>
                                                    <Text text="Category: {ToProduct/Category}" 
                                                          class="sapUiTinyText"/>
                                                    <Text text="Price: {ToProduct/Price} {ToProduct/CurrencyCode}" 
                                                          class="sapUiTinyText"/>
                                                </VBox>
                                                
                                                <Text text="{path: 'DeliveryDate', type: 'sap.ui.model.odata.type.DateTime', formatOptions: {pattern: 'dd/MM/yyyy'}}"/>
                                                <Text text="{Quantity} {QuantityUnit}"/>
                                                <Text text="{GrossAmount} {CurrencyCode}"/>
                                                <Text text="{NetAmount} {CurrencyCode}"/>
                                                <Text text="{TaxAmount} {CurrencyCode}"/>
                                                <Button text="View Product"
                                                       icon="sap-icon://detail-view"
                                                       type="Transparent"
                                                       press="onProductLineItemPress"
                                                       tooltip="View detailed product information"/>
                                            </cells>
                                        </ColumnListItem>
                                    </items>
                                </Table>
                            </VBox>
                        </content>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </content>
    </Page>
</mvc:View>