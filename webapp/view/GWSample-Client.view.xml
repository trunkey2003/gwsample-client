<mvc:View controllerName="ns.gwsampleclient.controller.GWSample-Client"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:form="sap.ui.layout.form">
    <Page id="page" title="Sales Orders Management">
        <content>
            <Panel id="searchPanel" 
                   headerText="Filter Options" 
                   expandable="true" 
                   expanded="true"
                   class="sapUiResponsiveMargin">
                <content>
                    <VBox class="sapUiMediumMargin">
                        <HBox alignItems="Center" class="sapUiSmallMarginBottom">
                            <Label text="Order Number:" width="140px"/>
                            <Input id="salesOrderInput" 
                                   value="{searchModel>/searchCriteria/salesOrderId}"
                                   showValueHelp="true"
                                   valueHelpRequest="onSalesOrderValueHelp"
                                   placeholder="Search by Order ID"
                                   width="220px"/>
                        </HBox>

                        <HBox alignItems="Center" class="sapUiSmallMarginBottom">
                            <Label text="Customer Info:" width="140px"/>
                            <Input id="customerInput" 
                                   value="{searchModel>/searchCriteria/customerName}"
                                   showValueHelp="true"
                                   valueHelpRequest="onCustomerValueHelp"
                                   placeholder="Search by Customer"
                                   width="220px"/>
                        </HBox>

                        <HBox alignItems="Center" class="sapUiSmallMarginBottom">
                            <Label text="Product Info:" width="140px"/>
                            <Input id="productInput" 
                                   value="{searchModel>/searchCriteria/productName}"
                                   showValueHelp="true"
                                   valueHelpRequest="onProductValueHelp"
                                   placeholder="Search by Product"
                                   width="220px"/>
                        </HBox>

                        <HBox class="sapUiMediumMarginTop">
                            <Button id="filterButton" 
                                    text="Apply Filter" 
                                    type="Emphasized"
                                    press="onSearch"
                                    icon="sap-icon://filter"
                                    class="sapUiSmallMarginEnd"/>
                            <Button id="resetButton" 
                                    text="Reset All" 
                                    press="onClearSearch"
                                    icon="sap-icon://reset"/>
                        </HBox>
                    </VBox>
                </content>
            </Panel>

            <Table id="mainSalesTable" 
                   items="{
						path: '/SalesOrderSet',
                        sorter: {path: 'DeliveryStatus'},
                        groupHeaderFactory: '.buildGroupHeader'  
					}"
                   class="sapUiResponsiveMargin"
                   mode="SingleSelect">

                <headerToolbar>
                    <Toolbar>
                        <Title text="Sales Order Overview" level="H2"/>
                        <ToolbarSpacer/>
                        <Text id="totalRecordsText" text=""/>
                    </Toolbar>
                </headerToolbar>

                <columns>
                    <Column>
                        <Text text="Order ID"/>
                    </Column>
                    <Column>
                        <Text text="Customer Information"/>
                    </Column>
                    <Column>
                        <Text text="Total Amount"/>
                    </Column>
                    <Column>
                        <Text text="Net Value"/>
                    </Column>
                    <Column>
                        <Text text="Tax Value"/>
                    </Column>
                    <Column>
                        <Text text="Invoice Status"/>
                    </Column>
                    <Column>
                        <Text text="Shipment Status"/>
                    </Column>
                </columns>

                <items>
                    <ColumnListItem press="onOrderItemSelected" type="Navigation">
                        <cells>
                            <Text text="{SalesOrderID}"/>
                            <Text text="{CustomerID} - {CustomerName}"/>
                            <Text text="{GrossAmount} {CurrencyCode}"/>
                            <Text text="{NetAmount} {CurrencyCode}"/>
                            <Text text="{TaxAmount} {CurrencyCode}"/>
                            <Text text="{BillingStatusDescription}"/>
                            <Text text="{DeliveryStatusDescription}"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
        <footer>
            <Toolbar>
                <ToolbarSpacer/>
                <Button id="dataRefreshButton" 
                        text="Refresh Data" 
                        type="Emphasized" 
                        press="onRegenerateData"
                        icon="sap-icon://synchronize"/>
            </Toolbar>
        </footer>
    </Page>
    
    <SelectDialog id="orderSelectionDialog"
                  title="Choose Sales Order"
                  search="onOrderDialogFilter"
                  confirm="onOrderDialogAccept"
                  cancel="onOrderDialogCancel"
                  items="{/SalesOrderSet}">
        <StandardListItem title="{SalesOrderID}"
                         description="{CustomerName} - {GrossAmount} {CurrencyCode}"
                         info="{LifecycleStatusDescription}"
                         type="Active"/>
    </SelectDialog>
    
    <SelectDialog id="customerSelectionDialog"
                  title="Choose Customer"
                  search="onCustomerDialogFilter"
                  confirm="onCustomerDialogAccept"
                  cancel="onCustomerDialogCancel"
                  items="{/BusinessPartnerSet}">
        <StandardListItem title="{CompanyName}"
                         description="{BusinessPartnerID}"
                         info="{EmailAddress}"
                         type="Active"/>
    </SelectDialog>

    <SelectDialog id="productSelectionDialog"
                  title="Choose Product"
                  search="onProductDialogFilter"
                  confirm="onProductDialogAccept"
                  cancel="onProductDialogCancel"
                  items="{/ProductSet}">
        <StandardListItem title="{Name}"
                         description="{ProductID} - {Category}"
                         info="{Price} {CurrencyCode}"
                         type="Active"/>
    </SelectDialog>

</mvc:View>